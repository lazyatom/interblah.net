class Sitemap < Vanilla::Dynasnip
  attribute :domain, "interblah.net"
  def handle
    urls = app.soup.all_snips_.map { |snip| 
      "<url><loc>http://#{domain}#{url_to snip.name}</loc></url>"
    }
    xml =<<-EOX
<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
      #{urls}
</urlset>
    EOX
  end
  self # for the renderer
end

:render_as: Ruby
:created_at: 2009-02-26 10:06:59 +00:00
:domain: interblah.net
:updated_at: 2009-02-26 10:14:35 +00:00
:author: james
:name: sitemap
